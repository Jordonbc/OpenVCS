/* ==========================================================================
   components.css — reusable UI components (buttons, badges, lists, panes,
   diff view, commit panel, branch switcher).
   No modal/popover or app layout styles here.
   ========================================================================== */

/* ========== Buttons ========== */
.btn,.tbtn,.pick{
    border:1px solid var(--border);
    background:var(--surface);
    color:var(--text);
    cursor:pointer;
    padding:.42rem .66rem;
    border-radius:var(--r-sm);
    font:inherit;
    transition:border-color .15s, background-color .15s, transform .06s;
    will-change:transform;
}
.btn:hover,.tbtn:hover,.pick:hover{ border-color:var(--accent); }
.btn:active,.tbtn:active,.pick:active{ transform:translateY(1px); }

.btn.primary,.tbtn.primary{
    background:var(--accent);
    border-color:var(--accent);
    color:#fff;
    font-weight:600;
}
.btn.primary:hover,.tbtn.primary:hover{ background:var(--accent-2); }
.tbtn.primary.big{ padding:.55rem .9rem; border-radius:var(--r-lg); }
.btn.icon{ padding:.32rem .5rem; border-radius:var(--r-sm); }

/* Disabled buttons */
button:disabled,.btn:disabled,.btn.primary:disabled,.tbtn:disabled,.pick:disabled{
    opacity:.55; cursor:not-allowed; pointer-events:none; transform:none!important;
}
.btn.primary:disabled,.tbtn.primary:disabled{
    background:var(--surface-2); border-color:var(--border); color:var(--muted);
}

/* ========== Badges ========== */
.badge{
    font-size:.78rem; color:var(--muted);
    border:1px solid var(--border); padding:.15rem .45rem;
    border-radius:999px;
}

/* ========== Left pane (fixed header + scrollable list) ========== */
.left{
    display:flex; flex-direction:column; min-height:0;
}
.left-head{
    flex:0 0 auto;
    display:flex; align-items:center; gap:.6rem;
    padding:.5rem; border-bottom:1px solid var(--border);
}
.filter{
    flex:1;
    display:flex; align-items:center; gap:.4rem;
    border:1px solid var(--border); border-radius:999px;
    padding:.3rem .6rem; background:transparent;
}
.filter .select-all{ display:flex; align-items:center; gap:.35rem; margin-right:.45rem; opacity:.9; }
.filter .select-all span{ font-size:.85rem; color:var(--muted); }
.filter .select-all input{ appearance:none; -webkit-appearance:none; width:16px; height:16px; border:1px solid var(--border); border-radius:4px; background:transparent; display:inline-block; }
.filter .select-all input:hover{ border-color:var(--accent); }
.filter .select-all input:checked{ background:rgba(38,162,105,1); border-color:rgba(38,162,105,1); box-shadow:0 0 0 2px rgba(38,162,105,.18); }
.filter .select-all input:indeterminate{ background:rgba(38,162,105,1); opacity:.7; }
.filter input{
    flex:1; min-width:0; border:none; outline:none;
    background:transparent; color:var(--text);
}
.filter-icon{ opacity:.85; }

/* List items */
.list{
    list-style:none; margin:0; padding:.25rem;
    display:flex; flex-direction:column; gap:.25rem;
    flex:1 1 auto; min-height:0; overflow:auto;
}
.row{
    display:flex; align-items:center; gap:.6rem;
    padding:.5rem .6rem; border-radius:var(--r-md);
    border:1px solid transparent; cursor:pointer;
    position:relative; /* allow active marker */
}
.row:hover{ background:rgba(255,255,255,.04); }
.row.active{ background:rgba(53,132,228,.12); border-color:rgba(53,132,228,.35); }
/* Add a thin accent marker for the active (viewed) row so it stays visible even when picked */
.row.active::before{
    content:""; position:absolute; left:0; top:0; bottom:0; width:3px;
    background:var(--accent); border-radius:var(--r-md) 0 0 var(--r-md);
}
/* Picked (included in next commit) uses a success tint so it differs from active */
.row.picked{ background:rgba(38,162,105,.10); border-color:rgba(38,162,105,.35); }
/* When a row is both picked and active, keep the picked (green) background and show active marker */
.row.active.picked{ background:rgba(38,162,105,.10); border-color:rgba(38,162,105,.35); }
.file{ white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.status.add{ color:var(--success); }
.status.mod{ color:#8b5cf6; }
.status.del{ color:var(--danger); }

/* ========== Right pane (header | scroll | commit) ========== */
.right{
    display:grid; grid-template-rows:auto 1fr auto; min-height:0;
}

/* Diff header (fixed) */
.diff-head{
    display:flex; align-items:center; justify-content:space-between; gap:.6rem;
    padding:.6rem .8rem; border-bottom:1px solid var(--border);
    flex:0 0 auto;
}
.path{ font-weight:600; }
.meta{ color:var(--muted); font-size:.85rem; display:flex; gap:.6rem; }

/* Diff body (scrolls) */
.diff{
    min-height:0; overflow:auto;
    font-family:var(--mono); font-size:13px;
}
.hunk{ padding:.25rem 0; }
/* Picked hunk (included in commit) — success tint */
.hunk.picked{ background:rgba(38,162,105,.08); border-left:3px solid rgba(38,162,105,.55); }
.hline{
    display:grid; grid-template-columns:56px 1fr; gap:.6rem;
    padding:.15rem .8rem;
}
.gutter{ color:var(--muted); text-align:right; user-select:none; }
.code{ white-space:pre-wrap; overflow-wrap:anywhere; word-break:break-word; min-width:0; }
.hline.add{ background:rgba(38,162,105,.12); }
.hline.del{ background:rgba(192,28,40,.12); }

/* Compact selection toggles */
.row input.pick, .pick-hunk{ appearance:none; -webkit-appearance:none; width:14px; height:14px;
    border:1px solid var(--border); border-radius:3px; background:transparent; display:inline-block; }
/* Use accent for focus/hover, success for checked to reinforce inclusion meaning */
.row input.pick:checked, .pick-hunk:checked{ background:rgba(38,162,105,1); border-color:rgba(38,162,105,1); box-shadow:0 0 0 2px rgba(38,162,105,.18); }
.row input.pick:indeterminate{ background:linear-gradient(0deg, rgba(38,162,105,1), rgba(38,162,105,1)); opacity:.7; }
.row input.pick:hover, .pick-hunk:hover{ border-color:var(--accent); }
.pick-toggle{ display:inline-flex; align-items:center; justify-content:center; }
.sr-only{ position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0; }

/* Check mark indicator at end of row when picked */
.pick-mark{ margin-left:auto; color:rgba(38,162,105,1); opacity:0; transition:opacity .15s; font-weight:600; }
.row.picked .pick-mark{ opacity:1; }

/* Commit panel (pinned at bottom) */
.commit{
    border-top:1px solid var(--border); background:var(--surface);
    padding:.6rem .8rem; display:grid; grid-template-columns:1fr auto;
    gap:.6rem; align-items:center; flex:0 0 auto;
}
.commit .inputs{ display:grid; gap:.4rem; }
.commit input,.commit textarea{
    width:100%; border:1px solid var(--border);
    background:var(--surface-2); color:var(--text);
    border-radius:var(--r-sm); padding:.55rem .65rem;
}
.commit textarea{ min-height:64px; resize:vertical; }
.kbd{
    border:1px solid var(--border); border-bottom-width:2px;
    border-radius:6px; padding:.05rem .32rem; color:var(--muted); font-size:.8rem;
}

/* Status bar spinner when busy (e.g., committing) */
#status.busy::after{
    content:""; display:inline-block; width:12px; height:12px; margin-left:.5rem;
    border:2px solid var(--muted); border-top-color:var(--accent);
    border-radius:50%; animation:spin .8s linear infinite; vertical-align:-2px;
}
@keyframes spin { from{ transform:rotate(0deg);} to{ transform:rotate(360deg);} }

/* ========== Branch switcher (button only) ========== */
.branch-switch{
    display:inline-flex; align-items:center; gap:.45rem; margin-left:.4rem;
    padding:.35rem .6rem; border-radius:var(--r-sm);
    border:1px solid var(--border); background:var(--surface);
    color:var(--text); cursor:pointer; font:inherit;
}
.branch-switch:hover{ border-color:var(--accent); }
.branch-switch .chev{ opacity:.8; }
.branch-dot{
    width:8px; height:8px; border-radius:999px; background:var(--accent);
    box-shadow:0 0 0 2px rgba(53,132,228,.18);
}
